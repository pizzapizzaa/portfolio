---
const navItems = [
  {
    name: 'Home',
    href: '#',
    icon: 'M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm-16,96H136V64h56Zm-72,0H64V64h56ZM64,144h56v56H64Zm72,56V144h56v56Z',
  },
  {
    name: 'Summary',
    href: '#section-2',
    icon: 'M216,48V88a8,8,0,0,1-16,0V56H136a8,8,0,0,1,0-16h64A8,8,0,0,1,216,48ZM120,200H56V136a8,8,0,0,0-16,0v64a8,8,0,0,0,8,8h72a8,8,0,0,0,0-16Zm80-8a8,8,0,0,0-8,8v16H136a8,8,0,0,0,0,16h64a8,8,0,0,0,8-8V200A8,8,0,0,0,200,192ZM48,64a8,8,0,0,0,8-8V40h56a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V56A8,8,0,0,0,48,64Z',
  },
  {
    name: 'Experience',
    href: '#section-3',
    icon: 'M216,56H176V48a24,24,0,0,0-24-24H104A24,24,0,0,0,80,48v8H40A16,16,0,0,0,24,72V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V72A16,16,0,0,0,216,56ZM96,48a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96ZM216,72v41.61A184,184,0,0,1,128,136a184.07,184.07,0,0,1-88-22.38V72Zm0,128H40V131.64A200.19,200.19,0,0,0,128,152a200.25,200.25,0,0,0,88-20.36V200Z',
  },
  {
    name: 'Skills',
    href: '#section-4',
    icon: 'M225.6,62.64l-88-48.17a19.91,19.91,0,0,0-19.2,0l-88,48.17A20,20,0,0,0,20,80.19v95.62a20,20,0,0,0,10.4,17.55l88,48.17a19.89,19.89,0,0,0,19.2,0l88-48.17A20,20,0,0,0,236,175.81V80.19A20,20,0,0,0,225.6,62.64ZM128,36.57,200,76,128,115.4,56,76ZM44,96.79l72,39.4v76.67L44,173.44Zm96,116.07V136.19l72-39.4v76.65Z',
  },
  {
    name: 'Latest Projects',
    href: '/projects',
    icon: 'M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V92.69l-20-20L152.88,116a16,16,0,0,1-22.63,0L116,101.63l-52.69,52.68L34.32,125.3l-1.6-1.61L40,116V56Zm0,144H40V132l32,32,48-48,14.34,14.34a32,32,0,0,0,45.27,0L208,101.67,216,109.67V200Z',
  },
];
---

<header class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-full max-w-[720px] px-4 animate-fade-in delay-100">
  <nav class="bg-white/10 backdrop-blur-40 rounded-full px-1 py-1 flex items-center justify-center gap-0 shadow-lg shadow-black/5 border border-white/5">
    {navItems.map((item, index) => (
      <a
        href={item.href}
        class="nav-item group relative flex items-center gap-2 px-4 py-3 rounded-full transition-smooth text-nav flex-1 justify-center"
      >
        <div class="nav-icon-container relative w-5 h-5">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 256 256"
            fill="currentColor"
            class="nav-icon-default absolute inset-0 w-full h-full text-white transition-smooth"
          >
            <path d={item.icon} />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 256 256"
            fill="currentColor"
            class="nav-icon-hover absolute inset-0 w-full h-full text-brown opacity-0 transition-smooth"
          >
            <path d={item.icon} />
          </svg>
        </div>
        <div class="nav-text-container relative whitespace-nowrap">
          <span class="nav-text-default text-white transition-smooth font-semibold">
            {item.name}
          </span>
          <span class="nav-text-hover absolute top-0 left-0 text-brown opacity-0 transition-smooth font-semibold">
            {item.name}
          </span>
        </div>
        <div class="nav-bg absolute inset-0 bg-white rounded-full opacity-0 scale-90 transition-smooth -z-10"></div>
      </a>
    ))}
  </nav>
</header>

<style>
  .nav-item:hover .nav-icon-default {
    opacity: 0;
  }
  
  .nav-item:hover .nav-icon-hover {
    opacity: 1;
  }

  .nav-item:hover .nav-text-default {
    opacity: 0;
  }

  .nav-item:hover .nav-text-hover {
    opacity: 1;
  }

  .nav-item:hover .nav-bg {
    opacity: 1;
    transform: scale(1);
  }

  /* Active state for current section */
  .nav-item.active .nav-icon-default {
    opacity: 0;
  }
  
  .nav-item.active .nav-icon-hover {
    opacity: 1;
  }

  .nav-item.active .nav-text-default {
    opacity: 0;
  }

  .nav-item.active .nav-text-hover {
    opacity: 1;
  }

  .nav-item.active .nav-bg {
    opacity: 1;
    transform: scale(1);
  }

  /* Responsive styling */
  @media (max-width: 1199px) {
    header {
      max-width: 100%;
    }
  }

  @media (max-width: 809px) {
    header {
      max-width: 312px;
    }

    nav {
      gap: 0;
      padding: 0.25rem;
      flex-direction: row;
      justify-content: space-between;
    }

    .nav-item {
      padding: 0.75rem;
      aspect-ratio: 1;
      width: 48px;
      height: 48px;
      flex: none;
      justify-content: center;
    }

    .nav-text-container {
      display: none;
    }

    .nav-icon-container {
      width: 1.5rem;
      height: 1.5rem;
    }
  }
</style>

<script>
  // Intersection Observer for active nav state
  document.addEventListener('DOMContentLoaded', () => {
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-item');

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute('id');
            navLinks.forEach((link) => {
              link.classList.remove('active');
              if (link.getAttribute('href') === `#${id}`) {
                link.classList.add('active');
              }
            });
          }
        });
      },
      {
        threshold: 0.5,
        rootMargin: '-100px 0px -66%',
      }
    );

    sections.forEach((section) => observer.observe(section));
  });
</script>
